<!--  - -  Copyright 2003-2004 Intecs - -  This file is part of TOOLBOX. -  TOOLBOX is free software; you can redistribute it andOr modify -  it under the terms of the GNU General Public License as published by -  the Free Software Foundation; either version 2 of the License, or -  (at your option) any later version. - -  File Name:         $RCSfile: viewServiceInfo.jsp,v $ -  TOOLBOX Version:   $Name: HEAD $ -  File Revision:     $Revision: 1.11 $ -  Revision Date:     $Date: 2006/11/02 13:38:30 $ - --><%@ page language="java" import="it.intecs.pisa.toolbox.db.*,it.intecs.pisa.toolbox.configuration.*,it.intecs.pisa.util.*,it.intecs.pisa.toolbox.service.*,java.util.*, org.w3c.dom.*, javax.xml.parsers.*, java.io.*, it.intecs.pisa.util.*, javax.xml.transform.*,  javax.xml.transform.dom.*,  javax.xml.transform.stream.*, it.intecs.pisa.soap.toolbox.*, java.net.URI"  %><%@taglib uri="http://java.sun.com/jstl/core"  prefix="c"%><%@taglib uri="http://java.sun.com/jstl/fmt"  prefix="fmt"%><link href="jsScripts/dom.css" rel=stylesheet></link><link href="jsScripts/dom.directory.css" rel=stylesheet></link><link href="jsScripts/portal.css" rel=stylesheet></link><link href="jsScripts/styles.css" rel=stylesheet></link> <link rel="stylesheet" type="text/css" href="jsScripts/import/gis-client-library/import/ext/resources/css/ext-all.css" ></link>     <!-- <script type="text/javascript" src="jsScripts/import/gis-client-library/widgets/lib/jquery/jquery-1.2.6.js"></script>      <script type="text/javascript" src="jsScripts/import/gis-client-library/import/ext/adapter/jquery/ext-jquery-adapter.js"></script>      <script type="text/javascript" src="jsScripts/import/gis-client-library/import/ext/adapter/ext/ext-base.js"></script>      <script type="text/javascript" src="jsScripts/import/gis-client-library/import/ext/ext-all.js"></script>-->      <script type="text/javascript" src="jsScripts/ext-2.0.1/adapter/jquery/ext-jquery-adapter.js"></script>      <script type="text/javascript" src="jsScripts/ext-2.0.1/adapter/ext/ext-base.js"></script>      <script type="text/javascript" src="jsScripts/ext-2.0.1/ext-all.js"></script>      <script type="text/javascript" src="jsScripts/DhtmlNew.js"></script>      <SCRIPT type="text/javascript" src="jsScripts/CommonScript.js"></SCRIPT><script>    function viewResource(type,parameters,label)    {        if(type == 'xml')            openTab('xml','Tab', "manager?output=text&" + parameters, 'XML ' + label);        if(type == 'tree')            openTab('tree','Tab', "manager?output=xml&" + parameters, 'TREE '+label);        if(type == 'text')            downloadPopup ("manager?output=xml&" + parameters);    }</script><HTML>    <HEAD>        <TITLE>SSE Toolbox</TITLE>    </HEAD>    <BODY id=body>        <%                    String service = request.getParameter("serviceName") != null ? request.getParameter("serviceName") : "";                    ;                    ServiceManager servMan;                    servMan = ServiceManager.getInstance();                    ToolboxConfiguration configuration;                    configuration = ToolboxConfiguration.getInstance();                    String company = configuration.getConfigurationValue(ToolboxConfiguration.COMPANY_NAME);                    if (company == null) {                        company = "Not provided";                    }                    String contact = configuration.getConfigurationValue(ToolboxConfiguration.COMPANY_CONTACT);                    if (contact == null) {                        contact = "Not provided";                    }                    TBXService serviceDescriptor = servMan.getService(service);                    TBXSOAPInterface interf;                    interf = (TBXSOAPInterface) serviceDescriptor.getImplementedInterface();                    String serviceDescription = IOUtil.inputToString(serviceDescriptor.getServiceDescription());                    String serviceAbstract = IOUtil.inputToString(serviceDescriptor.getServiceAbstract());                    String WSDLUrl = serviceDescriptor.getWSDLUrl();                    String schemaUrl = serviceDescriptor.getSchemaUrl();                                               %>        <TABLE cellSpacing=0 cellPadding=0 width="100%" align=center>            <TBODY>                <TR>                    <TD class=pageBody id=main>                        <TABLE cellSpacing=0 cellPadding=0 width="100%" align=center valign="top"><TBODY>                                <TR>                                    <TD id=main>                                        <P class=arbloc>                                        <TABLE width="100%">                                            <TBODY>                                                <TR>                                                    <TD colSpan=2>                                                        <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>                                                            <TBODY>                                                                <TR>                                                                    <TD class=tabdark>Information</TD>                                                                    <TD class=cetab>&nbsp;</TD></TR>                                                                <TR>                                                                    <TD class=celldark                                                                        colSpan=3>Service</TD></TR></TBODY></TABLE></TD></TR>                                                <TR>                                                    <TD>                                                        <DIV class=whitebloc></DIV>                                                        <DIV class=cellsm_t><%=service%></DIV>                                                        <DIV class=whitebloc></DIV></TD></TR>                                                <TR>                                                    <TD class=celltablesm vAlign=top width="77%">                                                        <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>                                                            <TBODY>                                                                <TR>                                                                    <TD class=celltablesm vAlign=top width="77%">                                                                        <TABLE cellSpacing=0 cellPadding=0 width="100%" border=0>                                                                            <TBODY>                                                                                <TR>                                                                                    <TD class=cellsx_t vAlign=top height=35>Owner</TD>                                                                                    <TD class=celldx vAlign=top height=35><%=company%></TD></TR>                                                                                <TR>                                                                                    <TD class=cellsx_t vAlign=top height=35>Contact person</TD>                                                                                    <TD class=celldx vAlign=top height=35><%=contact%></TD></TR>                                                                                <TR>                                                                                    <TD class=cellsx_t vAlign=top height=35>Abstract</TD>                                                                                    <TD class=celldx vAlign=top height=35><%=serviceAbstract%></TD></TR>                                                                                <TR>                                                                                    <TD class=cellsx_t vAlign=top height=35>Description</TD>                                                                                    <TD class=celldx vAlign=top height=35><%=serviceDescription%></TD></TR>                                                                                <TR>                                                                                    <TD class=cellsx_t vAlign=top height=35>Status</TD>                                                                                    <TD class=celldx vAlign=top height=35><%= ServiceStatuses.toString(ServiceStatuses.getStatus(service))%></TD></TR>                                                                            </TBODY></TABLE>                                                                        <DIV class=whitebloc></DIV>                                                                        <DIV class=cellsm_t>Operation</DIV>                                                                        <DIV class=whitebloc></DIV>                                                                        <%                                                    DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();                                                    docFactory.setNamespaceAware(true);                                                    Document xslDocument = docFactory.newDocumentBuilder().parse(new File(application.getRealPath("WEB-INF/XSL/listOperationsInfo.xsl")));                                                    Transformer transformer = TransformerFactory.newInstance().newTransformer(new DOMSource(xslDocument));                                                    transformer.setParameter("serviceName", service);                                                    transformer.setParameter("language", "en");                                                    transformer.transform(new StreamSource(serviceDescriptor.viewDescriptorFile()), new StreamResult(out));                                                                        %>                                                                        <DIV class=whitebloc></DIV>                                                                        <DIV class=cellsm_t>Other information</DIV>                                                                        <DIV class=whitebloc></DIV>                                                                        <TABLE cellSpacing=0 cellPadding=0 width="100%"                                                                               border=0>                                                                            <TBODY>                                                                                <TR>                                                                                    <TD class=cellsx_t vAlign=top height=35>WSDL</TD>                                                                                    <TD class=celldx vAlign=top height=35>                                                                                        <% if (interf.hasWSDL()) {                                                                                        %>                                                                                        WSDL (<A class=smpgttl href="#" onclick="javascript:viewResource('text','cmd=getSrvWSDL&serviceName=<%= service%>','WSDL')">See file </A>                                                                                        <A href="#" onclick="javascript:viewResource('xml','cmd=getSrvWSDL&serviceName=<%= service%>','WSDL')"><img src="images/xml-icon.gif" alt="XML view"></A>                                                                                        <A href="#" onclick="javascript:viewResource('tree','cmd=getSrvWSDL&serviceName=<%= service%>','WSDL')"><img src="images/tree-icon.gif" alt="XML view"></A>                                                                                        <%                                         } else {                                                                                        %>Not available<%            }                                                                                        %>                                                                                    </TD></TR>                                                                                <TR>                                                                                    <TD class=cellsx_t vAlign=top height=35>Schema file</TD>                                                                                    <TD class=celldx vAlign=top height=35>                                                                                        <% if (interf.hasSchema()) {                                                                                        %>                                                                                        Schema (<A class=smpgttl href="#"  onclick="javascript:viewResource('text','cmd=getSrvSchema&serviceName=<%= service%>','Service Schema')">See file </A>                                                                                        <A href="#" onclick="javascript:viewResource('xml','cmd=getSrvSchema&serviceName=<%= service%>','Service Schema')"><img src="images/xml-icon.gif" title="XML view"></A>                                                                                        <A href="#" onclick="javascript:viewResource('tree','cmd=getSrvSchema&serviceName=<%= service%>','Service Schema')"><img src="images/tree-icon.gif" title="XML tree view"></A>                                                                                        <%                                             } else {                                                                                        %>Not available<%            }                                                                                        %>                                                                                    </TD>                                                                                </TR></TBODY></TABLE>                                                                    </TD>                                                                </TR></TBODY></TABLE></TD></TR></TBODY></TABLE>                                        </BODY>                                        </HTML>