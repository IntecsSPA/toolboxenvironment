<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>XML Script Tags Reference</title>


<link type="text/css" href="../images/page.css" rel="stylesheet"></head><body bgcolor="#ffffff" text="#000000">
<h1>SOAP</h1>           
                <table border="1" cellspacing="0" width="100%">
                  <tbody>
                    <tr> 
                      <td align="center" bgcolor="#cccccc" width="9%">Tag Name</td>
                      <td bgcolor="#f0f0f0" width="91%"><font color="#993300"><strong>soapCall<a name="soapCall"></a></strong></font></td>
                    </tr>
                    <tr> 
                      <td align="center" bgcolor="#cccccc" valign="top">Attributes</td>
                      <td align="center" bgcolor="#f0f0f0"><table bgcolor="#f0f0f0" border="1" cellspacing="0" width="100%">
                          <tbody>
                            <tr> 
                              <td align="center" bgcolor="#cccccc" width="20%">Name</td>
                              <td align="center" bgcolor="#cccccc" width="20%">Type</td>
                              <td align="center" bgcolor="#cccccc" width="20%">Use</td>
                              <td align="center" bgcolor="#cccccc" width="20%">Default</td>
                              <td align="center" bgcolor="#cccccc" width="20%">Description</td>
                            </tr>                            
                            <tr> 
                              <td align="center">operation</td>
                              <td align="center">xsd:string</td>
                              <td align="center">optional</td>
                              <td align="center"><br>
</td>
                              <td align="justify">The soapAction HTTP header: 
                                this is for communicating with services deployed 
                                on the TOOLBOX and for all those services requirng 
                                a non empty soapAction HTTP header.</td>
                            </tr>
                            <tr> 
                              <td align="center">sslCertificateLocation</td>
                              <td align="center">xsd:string</td>
                              <td align="center">optional</td>
                              <td align="center"><br>
</td>
                              <td align="justify">The location of the certificate 
                                in case of secure communication </td>
                            </tr>
                          </tbody>
                        </table></td>
                    </tr>
                    <tr> 
                      <td align="center" bgcolor="#cccccc" valign="top">Description</td>
                      <td align="justify" bgcolor="#f0f0f0">Performs
a SOAP call to the url returned by the evaluation of the first enclosed
element and returns the XML document contained in the SOAP response. An
optional child tag, called &lt;soapHeaders&gt; can be used to define
the header section of the SOAP message. All children tags of
&lt;soapHeaders&gt; shall be scripting tags which returns XML
documents. These will be evaluated and used as headers. The last
enclosed element must return an XML document representing the payload
(i.e. the child element of the SOAP body) of the SOAP message to be
sent. If the optional "operation" attribute is specified the soapAction
HTTP header is set to that value: this is for communicating with
services deployed on the TOOLBOX and for all those services requirng a
non empty soapAction HTTP header. The (optional) attribute
"sslCertificateLocation" allows specifying the path to a certificate
for SSL communication.</td>
                    </tr>
                    <tr> 
                      <td align="center" bgcolor="#cccccc" valign="top">Examples</td>
                      <td align="left" bgcolor="#f0f0f0"><pre>&lt;soapCall&gt;<br>	&lt;string&gt;http://my.server:31000&lt;/string&gt;<br>	&lt;loadXML&gt;<br>		&lt;string&gt;/tmp/request.xml&lt;/string&gt;<br>	&lt;/loadXML&gt;<br>&lt;/soapCall&gt;</pre>
                        <font>Sends on the port 31000 of the server my.server 
                        a SOAP message whose payload (i.e. the child of &lt;SOAP-ENV:Body&gt;) 
                        is contained in /tmp/request.xml</font>. <pre>&lt;soapCall operation="sendRFQ"&gt;<br>	&lt;string&gt;http://localhost:8080/TOOLBOX/services/testService&lt;/string&gt;<br>	&lt;loadXML&gt;<br>		&lt;string&gt;/tmp/request.xml&lt;/string&gt;<br>	&lt;/loadXML&gt;<br>&lt;/soapCall&gt;</pre>
                        <font>Sends to the "testService" service deployed 
                        on the TOOLBOX installed on "localhost" (port 
                        8080) a SOAP message whose payload is contained in /tmp/request.xml.</font> 
                        The HTTP header "SOAPAction" is set to "sendRFQ" 
                        (which means that a "sendRFQ" request to "testService" 
                        has been arrived). <pre>&lt;soapCall operation="sendRFQ" sslCertificateLocation="/tmp/client.keystore"&gt;<br>	&lt;string&gt;https://localhost:8443/TOOLBOX/services/testService&lt;/string&gt;<br>	&lt;loadXML&gt;<br>		&lt;string&gt;/tmp/request.xml&lt;/string&gt;<br>	&lt;/loadXML&gt;<br>&lt;/soapCall&gt;</pre> 
                        <font>Sends to the "testService" service deployed 
                        on the TOOLBOX installed on "localhost" (port 
                        8443) a SOAP message (whose payload is contained in /tmp/request.xml) 
                        using secure communication.</font> The certificate is 
                        loaded from "/tmp/client.keystore". <font><em><strong>NOTE 
                        that in this case the protocol "https" has been 
                        indicated. Make sure to use the right protocol and port 
                        number.<br>
      <br>
</strong></em></font>
      <pre>&lt;soapCall operation="sendRFQ" sslCertificateLocation="/tmp/client.keystore"&gt;<br>	&lt;string&gt;https://localhost:8443/TOOLBOX/services/testService&lt;/string&gt;<br>	&lt;soapHeaders&gt;<br>        	&lt;xml&gt;<br>			......<br>		&lt;/xml&gt;<br> 	&lt;/soapHeaders&gt;<br>	&lt;loadXML&gt;<br>		&lt;string&gt;/tmp/request.xml&lt;/string&gt;<br>	&lt;/loadXML&gt;<br>&lt;/soapCall&gt;</pre>
 
                        <font>This example performs the same request as above, but adds the header given by the execution of the xml tag.<br>
      </font></td></tr></tbody></table><h1>SOAPFault</h1> 
<table border="1" cellspacing="0" width="100%">
                  <tbody>
                    <tr> 
                      <td align="center" bgcolor="#cccccc" width="9%">Tag Name</td>
                      <td bgcolor="#f0f0f0" width="91%"><font color="#993300"><strong>SOAPFault<a name="soapfault"></a></strong></font></td>
                    </tr>
                    
                    <tr> 
                      <td align="center" bgcolor="#cccccc" valign="top">Description</td>
                      <td align="justify" bgcolor="#f0f0f0">This
tag builds a SOAP Fault message and returns it. The child tag must
return a String which will be used as SOAP Fault message.</td>
                    </tr>
                    <tr> 
                      <td align="center" bgcolor="#cccccc" valign="top">Examples</td>
                      <td align="left" bgcolor="#f0f0f0"><pre>&lt;SOAPFault&gt;<br>	&lt;string&gt;An error occurred&lt;/SOAPFault&gt;<br></pre>

                        <font>Returns a SOAP Fault with the "An error occurred" message</font></td>
                    </tr>
                  </tbody>
                </table>

</body></html>