<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><title>Service Management</title>


<link type="text/css" href="images/page.css" rel="stylesheet">
</head><body bgcolor="#ffffff" text="#000000">
<h1><span class="content">Asynchronous Web Processing Services </span></h1>
<div class="content"> 

    <h4><strong>WPS 1.0.0 Asynchronous support </strong></h4>
    <p>One important aspect when dealing with geospatial processing, is the fact that such calculation processes may take some time to complete. This processing time is depending on the type of process, the volume of input data, where this input data is retrieved from (local or remote via Web reference). For a lot of typical geospatial processes, this processing time shall exceed the length of a typical HTTP Request/response time-out duration. As such, the Web processing service differs from other OGC Services (like the Web Map or the Web Feature Service) that are expected to return data directly in response to the HTTP request in a synchronous manner. </p>
    <p>The WPS foresees a polling architectural pattern as the basis for its asynchronous operations. The way in which this is realised can be summarised as follows. </p>
    <p>In response to a DescribeProcess request, the WPS service will reply with a (set of) ProcessDescription data structures of which two elements element are named “statusSupported” and “storeSupported”. If “statusSupported” and “storeSupported” are &quot;true&quot;, the server shall keep the Status element of the stored Execute response document up to date while the request is being processed. The client can poll the updated Execute operation response via the URL identified for this purpose in the Execute response document and the complex data output(s) of this process will be available as web-accessible resources. If &quot;false&quot; the Status element shall not be updated by the server until processing has completed or failed.” </p>
    <p>So when a WPS has storeExecuteResponse is set to true, the response is not returned immediately and the executeResponseLocation attribute in the execute response becomes mandatory. This attribute contains the URL from which the response document can later be retrieved during process execution to continuously monitor the status of the process. Upon completion of the process, the WPS service will update the document to indicate completeness and provide the client with the URL from where to download the processing result. The ExecuteResponse document contains a specific status data structure that should contain one out of ProcessAccepted, ProcessStarted, ProcessPaused, ProcessSucceeded or ProcessFailed in addition to the creation time of the process. When the processStarted is specified then the “percentCompleted” shall be reported </p>
    <h4>WPS SOAP bidings WS-Addressing support (not standard) </h4>
    <p>A more optimised way of working from a message exchange point of view is where the server itself would notify the client when a process is finished. A service consumer invokes a service, and the provider will send a callback once the process is completed. In order to receive the callback response, the service consumer will need to have a Web service endpoint that the provider uses to send the message back. Such communication patterns are well established in the world of W3C SOAP Web Services such as WS-Addressing. </p>
    <p>WS-Addressing provides transport-neutral mechanisms to address Web services and messages. Web Services Addressing 1.0 - Core defines a set of abstract properties and an XML representation thereof to reference Web services and to facilitate end-to-end addressing of endpoints in messages. Web Services Addressing 1.0 - SOAP Binding defines the binding of the abstract properties defined in this ‘Core recommendation” to SOAP (1.2) Messages. In addition there is the Web Services Addressing 1.0 - Metadata that defines how the abstract properties defined in the “Core recommendation” are described using WSDL, how to include WSDL metadata in endpoint references, and how WS-Policy can be used to indicate the support of WS-Addressing by a Web service. These three W3C Recommendations combined provide the means to specify delivery, reply-to, and fault-handler addressing information within a SOAP envelope. The core of WS-Addressing defines two interoperable constructs that convey addressing information that is typically provided by transport protocols and messaging systems. These constructs normalize this underlying information into a uniform format that can be processed independently of transport or application. The two constructs are: </p>
    <ul>
      <li>Endpoint references: a lightweight and extensible mechanism to dynamically identify and describe service endpoints and instances. It consists of abstract properties Address, ReferenceParameters and metadata. </li>
      <li>Message addressing properties that convey end-to-end message characteristics including references for source and destination endpoints and message identity. It consists of abstract properties like Destination, Source endpoint, Reply Endpoint, Fault Endpoint, Action, Message Id and Relationship.</li>
    </ul>
    <p>Using the WS-Addressing provided constructs one can hence include a Reply endpoint to which reply messages should be dispatched, a message Id and references to related previous messages inside the SOAP header hereby providing the means for enabling asynchronous communications whereby the WPS during or after processing would reply to the specified reply endpoint with mentioning of the original messageId.</p>

</div>
</body></html>